## 数仓工作

### 管理流程上的方法论
- 自动化部署
    - python脚本的上线自动化
    - SQL脚本的上线自动化
- 需求归档
    - gitlab与TAPD集成
- 统一日志收集
    - 把数仓任务的日志、邮件的日志、其他脚本（比如决策引擎变量解析）的日志统一收集
    - 基于统一的日志做监控，任务汇总统计


#### 邮件任务
- 其他同事完成的邮件任务，如何维护，如果很快速的找到？
- 员工离职、邮箱失效变更，如何方便管理（像在py发邮件脚本中写死邮件地址做硬编码是不合适的）


#### 工作流
- 其他同事开发维护的工作流，如何快速找到？
- 工作流如何组织和定义？同步的任务、dw层加工的任务、提数的任务
    - 属于同一业务的不同任务会放到一个工作流中，不具备依赖关系的可以并行执行，但是其中一个节点失败需要kill的时候，会导致整个工作流被kill
#### 数据地图
- 问题
    - 找数据难
        - 比如A同事开发的表，B同事不清楚，A同事离职了，这个表可能就没人知道在哪了
    - 统一数据说明的出处
    - 协同维护，保持设计数据理解一致，指标不重复开发等
- 使用方
    - 业务技术开发：业务变更，维护相关信息。数仓参与维护
    - 业务方：跟踪转化率、分析资金留存情况、根据大客户等，能够有一个数据说明的地方。之后在自助平台完成需求
    - 数仓人员：方便元数据搜索和管理，方便组内协作（AB岗）
    
#### 告警平台
传统是在任务中指定报警接收人，存在问题：
- 接收人变更失效的问题
- 需要有特定的人维护，手工去添加、修改告警对象

改进：
- 发送与接收解耦的订阅模式（需要了解任务是否成功的人执行订阅）


#### 补数
如何用未来的数据跑出前几天的结果。比如5号数仓有异常，跑不了4号的数据，6号的时候才恢复。

如果保证多次重跑跑出的结果一致？


#### 数据质量
- 提数需求时
    - 数据交叉校验规则（比如投资+利息+红包=提现）
    - 与历史、业务增长情况对比（太高、太低都可能有问题）

    